// Evol scripts.
// Authors:
//    Hal9000 (Francesco Miglietta), Reid
// Description:
//    An opening treasure chest.
// Variable:
//    ShipQuests_TreasureChest
// Values:
//    0: Not opened.
//    1: Opened.

000-1.gat,58,31,0	script	Chest	316;2,{

    set @q, geta(ShipQuests, ShipQuests_TreasureChest);
    if (getnpcdir ("") == 4) goto l_Give;
    set @a, getnpcdir;
    mes @a;
    setnpcdir 2;
    set @a, getnpcdir;
    mes @a;
    initnpctimer;
    startnpctimer;
    close;

l_Give:
    if (@q > 0) goto l_Close;
    seta ShipQuests, ShipQuests_TreasureChest, 1;
    getitem "WornShirt", 1;
    getitem "WornShorts", 1;
    close;

l_Close:
    setnpcdir 6;
    set @a, getnpcdir;
    mes @a;
    initnpctimer;
    startnpctimer;
    close;

OnTimer220:
    stopnpctimer;
    if (getnpcdir ("") == 2) setnpcdir 4;
    if (getnpcdir ("") == 6) setnpcdir 0;
    end;

}
